<div class="container">
  <div class="d-flex justify-content-between">
    <div class="d-flex flex-column col-7">
      <div class="card d-flex flex-column my-4">
        <h3 class="m-4 text-center"><%= @game_session.session_name %></h3>
        <div class="d-flex justify-content-center">
          <div class="ml-0 mt-1">
            <% if @game_session.user.photo.attached? %>
              <%= cl_image_tag @game_session.user.photo.key, class: "avatar-bordered dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
            <% else %>
              <%= image_tag "standard_avatar.jpg", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
            <% end %>
          </div>
          <div class="ml-1">
            <p class="mb-0">Hosted by:</p>
            <p> <%= link_to "#{@game_session.user.first_name} #{@game_session.user.last_name} ", user_path(@game_session.user), class: "text-warning" %></p>
          </div>
        </div>
      </div>

      <div class="card d-flex flex-column justify-content-between">
        <% if @game_session.photo.attached? %>
          <%= cl_image_tag @game_session.photo.key, class: "session-img" %>
        <% else %>
        <% end %>

        <div class="px-4">
          <h5 class="my-3">Details</h5>
          <p><%= @game_session.date.strftime("%A, %b %d")%></p>
          <p><%= @game_session.time.strftime("%l:%M %p")%></p>
          <p><%= @game_session.address %></p>
        </div>

        <div class="form px-4 pb-4">
          <% if current_user.lobbies.where(game_session: @game_session).empty? %>
            <%= simple_form_for [@game_session, @lobby] do |f| %>
            <%= f.submit "Ask to join", class: "btn btn-flat" %>
            <% end %>
          <% else %>
            <%= link_to game_session_lobby_path(@game_session, @lobby), method: :delete, data: { confirm: "Are you sure you want to leave this game session?" } do %>
              <button class = 'btn btn-flat'>Leave</button>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div id="map" class="flex-column round-border my-4 col-5"
        style="width: 100%; height: 600px;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>
